<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Agora Chat Demo</title>
  <script src="https://cdn.agora.io/sdk/release/AgoraRTM.latest.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #chat { max-height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    .message { margin: 5px 0; }
    input, button { padding: 8px; margin: 5px 0; }
  </style>
</head>
<body>
  <h2>Agora Real-Time Chat</h2>

  <div>
    <input id="username" placeholder="Enter your name" />
    <button onclick="login()">Login</button>
  </div>

  <div id="chat-container" style="display:none;">
    <div id="chat"></div>
    <input id="msg" placeholder="Type message..." />
    <button onclick="sendMessage()">Send</button>
  </div>

  <script>
    const APP_ID = "your-agora-app-id"; // Replace with your Agora App ID
    let client, channel;

    async function login() {
      const userName = document.getElementById('username').value;
      if (!userName) return alert("Enter username");

      client = AgoraRTM.createInstance(APP_ID);
      await client.login({ uid: userName });

      // Join channel
      channel = client.createChannel("community-chat");
      await channel.join();

      document.getElementById("chat-container").style.display = "block";

      // Message listener
      channel.on("ChannelMessage", ({ text }, senderId) => {
        const chat = document.getElementById("chat");
        const msgDiv = document.createElement("div");
        msgDiv.className = "message";
        msgDiv.innerHTML = `<strong>${senderId}:</strong> ${text}`;
        chat.appendChild(msgDiv);
        chat.scrollTop = chat.scrollHeight;
      });
    }

    async function sendMessage() {
      const msg = document.getElementById("msg").value;
      if (!msg) return;
      await channel.sendMessage({ text: msg });
      document.getElementById("msg").value = "";
    }
  </script>
</body>
</html>


